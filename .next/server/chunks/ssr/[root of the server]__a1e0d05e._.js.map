{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/teronordstrom/projects/cursor-next-js-trial/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { signIn, signOut, getCurrentUser, updateUserAttributes, type AuthUser } from 'aws-amplify/auth';\nimport { useRouter } from 'next/navigation';\n\ninterface UseAuthReturn {\n  user: AuthUser | null;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  updateProfile: (attributes: { given_name?: string; family_name?: string }) => Promise<void>;\n  loading: boolean;\n  error: string | null;\n}\n\nexport const useAuth = (): UseAuthReturn => {\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    checkAuthState();\n  }, []);\n\n  const checkAuthState = async () => {\n    try {\n      const user = await getCurrentUser();\n      setUser(user);\n    } catch (error) {\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignIn = async (email: string, password: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const { isSignedIn } = await signIn({ username: email, password });\n      if (isSignedIn) {\n        const user = await getCurrentUser();\n        setUser(user);\n        router.push('/dashboard');\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred during sign in');\n      }\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    setLoading(true);\n    try {\n      await signOut({ global: true });\n      setUser(null);\n      router.push('/login');\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred during sign out');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateProfile = async (attributes: { given_name?: string; family_name?: string }) => {\n    setLoading(true);\n    setError(null);\n    try {\n      await updateUserAttributes({\n        userAttributes: attributes\n      });\n      // Refresh user data\n      const updatedUser = await getCurrentUser();\n      setUser(updatedUser);\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred while updating profile');\n      }\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    user,\n    signIn: handleSignIn,\n    signOut: handleSignOut,\n    updateProfile: handleUpdateProfile,\n    loading,\n    error,\n  };\n}; "],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;AAWO,MAAM,UAAU;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;YAChC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe,OAAO,OAAe;QACzC,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,CAAA,GAAA,kMAAA,CAAA,SAAM,AAAD,EAAE;gBAAE,UAAU;gBAAO;YAAS;YAChE,IAAI,YAAY;gBACd,MAAM,OAAO,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;gBAChC,QAAQ;gBACR,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;YACA,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB;QACpB,WAAW;QACX,IAAI;YACF,MAAM,CAAA,GAAA,mMAAA,CAAA,UAAO,AAAD,EAAE;gBAAE,QAAQ;YAAK;YAC7B,QAAQ;YACR,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,sBAAsB,OAAO;QACjC,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,CAAA,GAAA,gNAAA,CAAA,uBAAoB,AAAD,EAAE;gBACzB,gBAAgB;YAClB;YACA,oBAAoB;YACpB,MAAM,cAAc,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;YACvC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;YACA,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QACL;QACA,QAAQ;QACR,SAAS;QACT,eAAe;QACf;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/teronordstrom/projects/cursor-next-js-trial/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/hooks/useAuth';\nimport Link from 'next/link';\nimport {\n  Container,\n  Box,\n  Typography,\n  TextField,\n  Button,\n  CircularProgress,\n  Paper,\n  InputAdornment,\n  IconButton,\n} from '@mui/material';\nimport {\n  Email as EmailIcon,\n  Lock as LockIcon,\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n} from '@mui/icons-material';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { signIn, user, loading: authLoading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    // If user is already logged in, redirect to dashboard\n    if (!authLoading && user) {\n      router.replace('/dashboard');\n    }\n  }, [user, authLoading, router]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      await signIn(email, password);\n      router.push('/dashboard');\n    } catch (error) {\n      setError('Invalid email or password');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (authLoading) {\n    return (\n      <Box\n        sx={{\n          minHeight: '100vh',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          bgcolor: 'grey.50',\n        }}\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box\n        sx={{\n          minHeight: '100vh',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          py: 12,\n        }}\n      >\n        <Paper\n          elevation={3}\n          sx={{\n            p: 4,\n            width: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <Typography component=\"h1\" variant=\"h4\" gutterBottom>\n            Sign in to your account\n          </Typography>\n\n          <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 3, width: '100%' }}>\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              autoFocus\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <EmailIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type={showPassword ? 'text' : 'password'}\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <LockIcon />\n                  </InputAdornment>\n                ),\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"toggle password visibility\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      edge=\"end\"\n                    >\n                      {showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n\n            {error && (\n              <Typography color=\"error\" sx={{ mt: 2, textAlign: 'center' }}>\n                {error}\n              </Typography>\n            )}\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              sx={{ mt: 3, mb: 2 }}\n              disabled={isLoading}\n            >\n              {isLoading ? <CircularProgress size={24} /> : 'Sign in'}\n            </Button>\n\n            <Box sx={{ textAlign: 'center' }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Don't have an account?{' '}\n                <Link href=\"/signup\" style={{ color: '#1976d2', textDecoration: 'none' }}>\n                  Sign up\n                </Link>\n              </Typography>\n            </Box>\n          </Box>\n        </Paper>\n      </Box>\n    </Container>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}