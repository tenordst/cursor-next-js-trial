{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/teronordstrom/projects/cursor-next-js-trial/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { signIn, signOut, getCurrentUser, updateUserAttributes, type AuthUser } from 'aws-amplify/auth';\nimport { useRouter } from 'next/navigation';\n\ninterface UseAuthReturn {\n  user: AuthUser | null;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  updateProfile: (attributes: { given_name?: string; family_name?: string }) => Promise<void>;\n  loading: boolean;\n  error: string | null;\n}\n\nexport const useAuth = (): UseAuthReturn => {\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    checkAuthState();\n  }, []);\n\n  const checkAuthState = async () => {\n    try {\n      const user = await getCurrentUser();\n      setUser(user);\n    } catch (error) {\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignIn = async (email: string, password: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const { isSignedIn } = await signIn({ username: email, password });\n      if (isSignedIn) {\n        const user = await getCurrentUser();\n        setUser(user);\n        router.push('/dashboard');\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred during sign in');\n      }\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    setLoading(true);\n    try {\n      await signOut({ global: true });\n      setUser(null);\n      router.push('/login');\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred during sign out');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateProfile = async (attributes: { given_name?: string; family_name?: string }) => {\n    setLoading(true);\n    setError(null);\n    try {\n      await updateUserAttributes({\n        userAttributes: attributes\n      });\n      // Refresh user data\n      const updatedUser = await getCurrentUser();\n      setUser(updatedUser);\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An error occurred while updating profile');\n      }\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    user,\n    signIn: handleSignIn,\n    signOut: handleSignOut,\n    updateProfile: handleUpdateProfile,\n    loading,\n    error,\n  };\n}; "],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;AAWO,MAAM,UAAU;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;YAChC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe,OAAO,OAAe;QACzC,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,CAAA,GAAA,kMAAA,CAAA,SAAM,AAAD,EAAE;gBAAE,UAAU;gBAAO;YAAS;YAChE,IAAI,YAAY;gBACd,MAAM,OAAO,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;gBAChC,QAAQ;gBACR,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;YACA,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB;QACpB,WAAW;QACX,IAAI;YACF,MAAM,CAAA,GAAA,mMAAA,CAAA,UAAO,AAAD,EAAE;gBAAE,QAAQ;YAAK;YAC7B,QAAQ;YACR,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,sBAAsB,OAAO;QACjC,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,CAAA,GAAA,gNAAA,CAAA,uBAAoB,AAAD,EAAE;gBACzB,gBAAgB;YAClB;YACA,oBAAoB;YACpB,MAAM,cAAc,MAAM,CAAA,GAAA,0MAAA,CAAA,iBAAc,AAAD;YACvC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;YACA,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QACL;QACA,QAAQ;QACR,SAAS;QACT,eAAe;QACf;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/teronordstrom/projects/cursor-next-js-trial/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/hooks/useAuth';\nimport { FiMail, FiLock } from 'react-icons/fi';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { signIn, user, loading: authLoading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    // If user is already logged in, redirect to dashboard\n    if (!authLoading && user) {\n      router.replace('/dashboard');\n    }\n  }, [user, authLoading, router]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      await signIn(email, password);\n      router.push('/dashboard');\n    } catch (error) {\n      setError('Invalid email or password');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Sign in to your account\n          </h2>\n        </div>\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          <div className=\"rounded-md shadow-sm -space-y-px\">\n            <div>\n              <label htmlFor=\"email\" className=\"sr-only\">\n                Email address\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <FiMail className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                  placeholder=\"Email address\"\n                />\n              </div>\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"sr-only\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <FiLock className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                  placeholder=\"Password\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"text-red-600 text-sm text-center\">{error}</div>\n          )}\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className={`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${\n                isLoading ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {isLoading ? 'Signing in...' : 'Sign in'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,UAAO,AAAD;IACrD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,sDAAsD;QACtD,IAAI,CAAC,eAAe,MAAM;YACxB,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAM;QAAa;KAAO;IAE9B,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,aAAa;QAEb,IAAI;YACF,MAAM,OAAO,OAAO;YACpB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,SAAS;QACX,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAI,aAAa;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;8BACC,cAAA,8OAAC;wBAAG,WAAU;kCAAyD;;;;;;;;;;;8BAIzE,8OAAC;oBAAK,WAAU;oBAAiB,UAAU;;sCACzC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAAU;;;;;;sDAG3C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC,8IAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;;;;;;8DAEpB,8OAAC;oDACC,IAAG;oDACH,MAAK;oDACL,MAAK;oDACL,cAAa;oDACb,QAAQ;oDACR,OAAO;oDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oDACxC,WAAU;oDACV,aAAY;;;;;;;;;;;;;;;;;;8CAIlB,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAW,WAAU;sDAAU;;;;;;sDAG9C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC,8IAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;;;;;;8DAEpB,8OAAC;oDACC,IAAG;oDACH,MAAK;oDACL,MAAK;oDACL,cAAa;oDACb,QAAQ;oDACR,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,WAAU;oDACV,aAAY;;;;;;;;;;;;;;;;;;;;;;;;wBAMnB,uBACC,8OAAC;4BAAI,WAAU;sCAAoC;;;;;;sCAGrD,8OAAC;sCACC,cAAA,8OAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAW,CAAC,oOAAoO,EAC9O,YAAY,kCAAkC,IAC9C;0CAED,YAAY,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7C","debugId":null}}]
}